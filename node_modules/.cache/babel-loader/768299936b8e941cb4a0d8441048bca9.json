{"ast":null,"code":"import _classCallCheck from\"/Users/akhilgupta/Desktop/Teen Patti/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akhilgupta/Desktop/Teen Patti/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/akhilgupta/Desktop/Teen Patti/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/akhilgupta/Desktop/Teen Patti/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akhilgupta/Desktop/Teen Patti/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{TextField,Button}from'@material-ui/core';import Box from'@material-ui/core/Box';import fire from'firebase';var divStyle={display:'flex',justifyContent:'center'};var Cards=/*#__PURE__*/function(_Component){_inherits(Cards,_Component);var _super=_createSuper(Cards);function Cards(props){var _this;_classCallCheck(this,Cards);_this=_super.call(this,props);_this.logout=_this.logout.bind(_assertThisInitialized(_this));_this.handleNumPlayersFieldChange=_this.handleNumPlayersFieldChange.bind(_assertThisInitialized(_this));_this.generate=_this.generate.bind(_assertThisInitialized(_this));_this.getCards=_this.getCards.bind(_assertThisInitialized(_this));_this.getRealCards=_this.getRealCards.bind(_assertThisInitialized(_this));_this.resetGame=_this.resetGame.bind(_assertThisInitialized(_this));_this.getMessages=_this.getMessages.bind(_assertThisInitialized(_this));_this.packed=_this.packed.bind(_assertThisInitialized(_this));_this.showCards=_this.showCards.bind(_assertThisInitialized(_this));_this.state={cardIndicies:[],firstCard:[],secondCard:[],thirdCard:[],cards:[],messages:[],numPlayers:'',userState:_this.props.userState,gameSet:true};return _this;}_createClass(Cards,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fire.auth().onAuthStateChanged(function(user){if(user){_this2.setState({userState:user});}});fire.database().ref('users/isGameSet').on('value',function(snap){_this2.setState({gameSet:snap.val()});});fire.database().ref('messages').on('value',function(snap){_this2.setState({messages:[]});snap.forEach(function(msg){_this2.setState({messages:_this2.state.messages.concat(msg.val().message)});});});}},{key:\"getMessages\",value:function getMessages(){return/*#__PURE__*/React.createElement(\"div\",null,this.state.messages.map(function(message,key){return/*#__PURE__*/React.createElement(\"h3\",{key:key},message);}));}},{key:\"logout\",value:function logout(){var _this3=this;fire.database().ref('users/list/'+fire.auth().currentUser.uid).update({isLoggedIn:false});fire.auth().signOut().then(function(result){_this3.setState({userState:null});});}},{key:\"resetGame\",value:function resetGame(e){e.preventDefault();// update isGameSet to database after reset game\nvar updates={};updates['users/'+'isGameSet']=false;fire.database().ref().update(updates);this.setState(function(state){return{gameSet:!state.gameSet};});this.setState({firstCard:[],secondCard:[],thirdCard:[]});var updates={};updates['messages/']=null;fire.database().ref().update(updates);}},{key:\"generate\",value:function generate(e){e.preventDefault();var randomNumbers=new Set();var cardsTrips=[];for(var _i=0;_i<52;_i++){var rand=Math.floor(Math.random()*51);randomNumbers.add(rand);}var cardsSet=randomNumbers.values();for(var j=0;j<this.state.numPlayers;j++){cardsTrips[j]=[cardsSet.next().value,cardsSet.next().value,cardsSet.next().value];}console.log(cardsTrips);this.setState({gameSet:true});// update isGameSet to database\nvar updates={};updates['users/'+'isGameSet']=true;fire.database().ref().update(updates);// update cards to database\nvar i=0;fire.database().ref('users').child('list').once('value',function(snap){snap.forEach(function(user){console.log(user.val().isLoggedIn);if(user.val().isLoggedIn){fire.database().ref('users/list/'+user.key).update({cards:cardsTrips[i]});i++;}});});}},{key:\"getCards\",value:function getCards(e){var _this4=this;e.preventDefault();console.log(this.state.gameSet);if(this.state.gameSet){fire.database().ref('users/list/'+fire.auth().currentUser.uid+'/cards').once('value').then(function(snap){_this4.setState({cardIndicies:snap.val()});_this4.getRealCards();});}else{console.log(\"Trying to get cards when you're not in a game\");}}},{key:\"getRealCards\",value:function getRealCards(){var _this5=this;fire.database().ref('cards/'+this.state.cardIndicies[0]).once('value').then(function(snap){_this5.setState({firstCard:snap.val()});});fire.database().ref('cards/'+this.state.cardIndicies[1]).once('value').then(function(snap){_this5.setState({secondCard:snap.val()});});fire.database().ref('cards/'+this.state.cardIndicies[2]).once('value').then(function(snap){_this5.setState({thirdCard:snap.val()});});fire.database().ref('messages/').push({message:this.state.userState.displayName+' is SEEN'});}},{key:\"renderCards\",value:function renderCards(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"The first card is: \",this.state.firstCard.card,\" \",this.state.firstCard.suit),/*#__PURE__*/React.createElement(\"h3\",null,\"The second card is: \",this.state.secondCard.card,\" \",this.state.secondCard.suit),/*#__PURE__*/React.createElement(\"h3\",null,\"The third card is: \",this.state.thirdCard.card,\" \",this.state.thirdCard.suit));}},{key:\"handleNumPlayersFieldChange\",value:function handleNumPlayersFieldChange(e){e.preventDefault();this.setState({numPlayers:e.target.value});}},{key:\"packed\",value:function packed(e){e.preventDefault();fire.database().ref('messages/').push({message:this.state.userState.displayName+' is PACK'});}},{key:\"showCards\",value:function showCards(e){e.preventDefault();fire.database().ref('messages/').push({message:this.state.userState.displayName+' is SHOW and their cards are: '+this.state.firstCard.card+' '+this.state.firstCard.suit+' '+this.state.secondCard.card+' '+this.state.secondCard.suit+' '+this.state.thirdCard.card+' '+this.state.thirdCard.suit});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"setup_game\",style:divStyle},!this.state.gameSet&&/*#__PURE__*/React.createElement(\"div\",{style:divStyle},/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(TextField,{id:\"numPlayers\",label:\"Number of players\",value:this.state.numPlayers,onChange:this.handleNumPlayersFieldChange,helperText:\"Please enter the number of players\"})),/*#__PURE__*/React.createElement(Box,{m:2,pt:3},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.generate.bind(this)},\"SETUP GAME\")),\" \")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(Button,{size:\"large\",variant:\"outlined\",color:\"primary\"},\"Hello, \",this.props.userState.displayName)),/*#__PURE__*/React.createElement(\"div\",{className:\"logout_reset\",style:divStyle},/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:this.logout.bind(this)},\"Logout\")),/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:this.resetGame.bind(this)},\"Reset Game\"))),/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:this.getCards.bind(this)},\"See Cards\")),/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.packed.bind(this)},\"Pack\")),/*#__PURE__*/React.createElement(Box,{m:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:this.showCards.bind(this)},\"Show Cards\")),/*#__PURE__*/React.createElement(\"h2\",null,\"Your cards are:\"),this.renderCards(),/*#__PURE__*/React.createElement(\"h2\",null,\" Messages:\"),this.getMessages());}}]);return Cards;}(Component);export default Cards;","map":{"version":3,"sources":["/Users/akhilgupta/Desktop/Teen Patti/src/components/Cards.js"],"names":["React","Component","TextField","Button","Box","fire","divStyle","display","justifyContent","Cards","props","logout","bind","handleNumPlayersFieldChange","generate","getCards","getRealCards","resetGame","getMessages","packed","showCards","state","cardIndicies","firstCard","secondCard","thirdCard","cards","messages","numPlayers","userState","gameSet","auth","onAuthStateChanged","user","setState","database","ref","on","snap","val","forEach","msg","concat","message","map","key","currentUser","uid","update","isLoggedIn","signOut","then","result","e","preventDefault","updates","randomNumbers","Set","cardsTrips","i","rand","Math","floor","random","add","cardsSet","values","j","next","value","console","log","child","once","push","displayName","card","suit","target","renderCards"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { TextField, Button } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport fire from 'firebase'\n\nconst divStyle = {\n    display: 'flex',\n    justifyContent: 'center'\n};\n\nclass Cards extends Component {\n    constructor(props) {\n        super(props);\n\n        this.logout = this.logout.bind(this);\n        this.handleNumPlayersFieldChange = this.handleNumPlayersFieldChange.bind(this);\n        this.generate = this.generate.bind(this);\n        this.getCards = this.getCards.bind(this);\n        this.getRealCards = this.getRealCards.bind(this);\n        this.resetGame = this.resetGame.bind(this);\n        this.getMessages = this.getMessages.bind(this);\n        this.packed = this.packed.bind(this);\n        this.showCards = this.showCards.bind(this);\n\n        this.state = {\n            cardIndicies: [],\n            firstCard: [],\n            secondCard: [],\n            thirdCard: [],\n            cards: [],\n            messages: [],\n            numPlayers: '',\n            userState: this.props.userState,\n            gameSet: true\n        }\n    }\n\n    componentDidMount() {\n        fire.auth().onAuthStateChanged((user) => {\n            if (user) {\n                this.setState({\n                    userState: user\n                })\n            }\n        })\n\n        fire.database().ref('users/isGameSet').on('value', snap => {\n            this.setState({ gameSet: snap.val() })\n        })\n\n        fire.database().ref('messages').on('value', snap => {\n            this.setState({ messages: [] })\n            snap.forEach((msg) => {\n                this.setState({\n                    messages: this.state.messages.concat(msg.val().message)\n                });\n            })\n        })\n    }\n\n    getMessages() {\n        return (\n            <div>\n                {this.state.messages.map((message, key) => {\n                    return (\n                        <h3 key={key}>{message}</h3>\n                    )\n                })}\n            </div>\n        )\n    }\n\n    logout() {\n        fire.database().ref('users/list/' + fire.auth().currentUser.uid).update({\n            isLoggedIn: false\n        })\n\n        fire.auth().signOut().then((result) => {\n            this.setState({\n                userState: null\n            })\n        })\n    }\n\n    resetGame(e) {\n        e.preventDefault()\n\n        // update isGameSet to database after reset game\n        var updates = {};\n        updates['users/' + 'isGameSet'] = false;\n        fire.database().ref().update(updates);\n\n        this.setState((state) => {\n            return { gameSet: !state.gameSet }\n        })\n\n        this.setState({\n            firstCard: [],\n            secondCard: [],\n            thirdCard: [],\n        })\n\n        var updates = {};\n        updates['messages/'] = null;\n        fire.database().ref().update(updates);\n    }\n\n    generate(e) {\n        e.preventDefault()\n\n        let randomNumbers = new Set();\n        let cardsTrips = [];\n        for (let i = 0; i < 52; i++) {\n            var rand = Math.floor((Math.random() * (51)));\n            randomNumbers.add(rand);\n        }\n\n        var cardsSet = randomNumbers.values()\n\n        for (let j = 0; j < this.state.numPlayers; j++) {\n            cardsTrips[j] = [cardsSet.next().value, cardsSet.next().value, cardsSet.next().value]\n        }\n\n        console.log(cardsTrips);\n        this.setState({ gameSet: true })\n\n        // update isGameSet to database\n        var updates = {};\n        updates['users/' + 'isGameSet'] = true;\n        fire.database().ref().update(updates);\n\n        // update cards to database\n        var i = 0;\n        fire.database().ref('users').child('list').once('value', snap => {\n            snap.forEach((user) => {\n                console.log(user.val().isLoggedIn);\n                if (user.val().isLoggedIn) {\n                    fire.database().ref('users/list/' + user.key).update({ cards: cardsTrips[i] })\n                    i++;\n                }\n            })\n        });\n    }\n\n    getCards(e) {\n        e.preventDefault()\n        console.log(this.state.gameSet)\n        if (this.state.gameSet) {\n            fire.database().ref('users/list/' + fire.auth().currentUser.uid + '/cards').once('value').then((snap => {\n                this.setState({ cardIndicies: snap.val() })\n                this.getRealCards()\n            }));\n        } else {\n            console.log(\"Trying to get cards when you're not in a game\")\n        }\n    }\n\n    getRealCards() {\n        fire.database().ref('cards/' + this.state.cardIndicies[0]).once('value').then((snap => {\n            this.setState({ firstCard: snap.val() })\n        }));\n\n        fire.database().ref('cards/' + this.state.cardIndicies[1]).once('value').then((snap => {\n            this.setState({ secondCard: snap.val() })\n        }));\n\n        fire.database().ref('cards/' + this.state.cardIndicies[2]).once('value').then((snap => {\n            this.setState({ thirdCard: snap.val() })\n        }));\n\n        fire.database().ref('messages/').push({ message: this.state.userState.displayName + ' is SEEN' })\n    }\n\n    renderCards() {\n        return (\n            <div>\n                <h3>The first card is: {this.state.firstCard.card} {this.state.firstCard.suit}</h3>\n                <h3>The second card is: {this.state.secondCard.card} {this.state.secondCard.suit}</h3>\n                <h3>The third card is: {this.state.thirdCard.card} {this.state.thirdCard.suit}</h3>\n            </div>\n        )\n    }\n\n    handleNumPlayersFieldChange(e) {\n        e.preventDefault()\n        this.setState({\n            numPlayers: e.target.value\n        })\n    }\n\n    packed(e) {\n        e.preventDefault()\n        fire.database().ref('messages/').push({ message: this.state.userState.displayName + ' is PACK' })\n    }\n\n    showCards(e) {\n        e.preventDefault()\n        fire.database().ref('messages/').push({\n            message: this.state.userState.displayName + ' is SHOW and their cards are: ' +\n                this.state.firstCard.card + ' ' + this.state.firstCard.suit + ' ' +\n                this.state.secondCard.card + ' ' + this.state.secondCard.suit + ' ' +\n                this.state.thirdCard.card + ' ' + this.state.thirdCard.suit\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"container\" >\n                <div className=\"setup_game\" style={divStyle}>\n                    {!this.state.gameSet && <div style={divStyle}>\n                        <Box m={2}>\n                            <TextField id=\"numPlayers\" label=\"Number of players\" value={this.state.numPlayers} onChange={this.handleNumPlayersFieldChange} helperText=\"Please enter the number of players\" />\n                        </Box>\n                        <Box m={2} pt={3}>\n                            <Button variant=\"contained\" color=\"secondary\" onClick={this.generate.bind(this)}>SETUP GAME</Button>\n                        </Box> </div>}\n                </div><br /><br />\n                <Box>\n                    <Button size=\"large\" variant=\"outlined\" color=\"primary\" >Hello, {this.props.userState.displayName}</Button>\n                </Box>\n                <div className=\"logout_reset\" style={divStyle}>\n                    <Box m={2}>\n                        <Button variant=\"contained\" color=\"primary\" onClick={this.logout.bind(this)} >Logout</Button>\n                    </Box>\n                    <Box m={2}>\n                        <Button variant=\"contained\" color=\"primary\" onClick={this.resetGame.bind(this)} >Reset Game</Button>\n                    </Box>\n                </div>\n                <Box m={2}>\n                    <Button variant=\"contained\" color=\"primary\" onClick={this.getCards.bind(this)} >See Cards</Button>\n                </Box>\n                <Box m={2}>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={this.packed.bind(this)} >Pack</Button>\n                </Box>\n                <Box m={2}>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={this.showCards.bind(this)} >Show Cards</Button>\n                </Box>\n                <h2>Your cards are:</h2>\n                {this.renderCards()\n                }\n                < h2 > Messages:</h2 >\n                {this.getMessages()}\n            </div >\n        );\n    }\n}\n\nexport default Cards"]},"metadata":{},"sourceType":"module"}